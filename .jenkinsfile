pipeline {
    agent any

    stages {
        stage('build') {
            steps {
                echo 'Only git code is commited'
            }
        }
        stage('test') {
            steps {
                echo 'Docker job'
                sh 'docker ps -a'
                sh 'docker run -it -d ubuntu'
                
                
                
                sh 'docker rm -f $(docker ps -q -a)'
                sh 'docker build /home/ubuntu/jenkins/workspace/test -t new'
                sh 'docker run -it -p 80:80 -d new'
            }
        }
        
    }
}
